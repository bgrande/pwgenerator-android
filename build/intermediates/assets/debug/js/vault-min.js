var CryptoJS=CryptoJS||function(t,e){var r={},n=r.lib={},i=function(){},o=n.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var i=0;t>i;i++)e[n+i>>>2]|=(r[i>>>2]>>>24-8*(i%4)&255)<<24-8*((n+i)%4);else if(65535<r.length)for(i=0;t>i;i+=4)e[n+i>>>2]=r[i>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-8*(r%4),e.length=t.ceil(r/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;e>n;n+=4)r.push(4294967296*t.random()|0);return new a.init(r,e)}}),c=r.enc={},s=c.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;t>n;n++){var i=e[n>>>2]>>>24-8*(n%4)&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-4*(n%8);return new a.init(r,e/2)}},u=c.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;t>n;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-8*(n%4)&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-8*(n%4);return new a.init(r,e)}},l=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,c=i/(4*o),c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0);if(e=c*o,i=t.min(4*e,i),e){for(var s=0;e>s;s+=o)this._doProcessBlock(n,s);s=n.splice(0,e),r.sigBytes-=i}return new a.init(s,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new h.HMAC.init(t,r).finalize(e)}}});var h=r.algo={};return r}(Math);!function(){var t=CryptoJS,e=t.lib,r=e.WordArray,n=e.Hasher,i=[],e=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],o=r[1],a=r[2],c=r[3],s=r[4],u=0;80>u;u++){if(16>u)i[u]=0|t[e+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}l=(n<<5|n>>>27)+s+i[u],l=20>u?l+((o&a|~o&c)+1518500249):40>u?l+((o^a^c)+1859775393):60>u?l+((o&a|o&c|a&c)-1894007588):l+((o^a^c)-899497514),s=c,c=a,a=o<<30|o>>>2,o=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+a|0,r[3]=r[3]+c|0,r[4]=r[4]+s|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),e[(n+64>>>9<<4)+15]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(e),t.HmacSHA1=n._createHmacHelper(e)}(),function(t){for(var e=CryptoJS,r=e.lib,n=r.WordArray,i=r.Hasher,r=e.algo,o=[],a=[],c=function(t){return 4294967296*(t-(0|t))|0},s=2,u=0;64>u;){var l;t:{l=s;for(var f=t.sqrt(l),h=2;f>=h;h++)if(!(l%h)){l=!1;break t}l=!0}l&&(8>u&&(o[u]=c(t.pow(s,.5))),a[u]=c(t.pow(s,1/3)),u++),s++}var p=[],r=r.SHA256=i.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],c=r[3],s=r[4],u=r[5],l=r[6],f=r[7],h=0;64>h;h++){if(16>h)p[h]=0|t[e+h];else{var d=p[h-15],y=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+p[h-16]}d=f+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&l)+a[h]+p[h],y=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&o^i&o),f=l,l=u,u=s,s=c+d|0,c=o,o=i,i=n,n=d+y|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+c|0,r[4]=r[4]+s|0,r[5]=r[5]+u|0,r[6]=r[6]+l|0,r[7]=r[7]+f|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[(i+64>>>9<<4)+14]=t.floor(n/4294967296),r[(i+64>>>9<<4)+15]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(r),e.HmacSHA256=i._createHmacHelper(r)}(Math),function(){var t=CryptoJS,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,r){t=this._hasher=new t.init,"string"==typeof r&&(r=e.parse(r));var n=t.blockSize,i=4*n;r.sigBytes>i&&(r=t.finalize(r)),r.clamp();for(var o=this._oKey=r.clone(),a=this._iKey=r.clone(),c=o.words,s=a.words,u=0;n>u;u++)c[u]^=1549556828,s[u]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=CryptoJS,e=t.lib,r=e.Base,n=e.WordArray,e=t.algo,i=e.HMAC,o=e.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,o=i.create(r.hasher,t),a=n.create(),c=n.create([1]),s=a.words,u=c.words,l=r.keySize,r=r.iterations;s.length<l;){var f=o.update(e).finalize(c);o.reset();for(var h=f.words,p=h.length,d=f,y=1;r>y;y++){d=o.finalize(d),o.reset();for(var v=d.words,_=0;p>_;_++)h[_]^=v[_]}a.concat(f),u[0]++}return a.sigBytes=4*l,a}});t.PBKDF2=function(t,e,r){return o.create(r).compute(t,e)}}(),function(){var t=CryptoJS,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var i=0;r>i;i+=3)for(var o=(e[i>>>2]>>>24-8*(i%4)&255)<<16|(e[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|e[i+2>>>2]>>>24-8*((i+2)%4)&255,a=0;4>a&&r>i+.75*a;a++)t.push(n.charAt(o>>>6*(3-a)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var r=t.length,n=this._map,i=n.charAt(64);i&&(i=t.indexOf(i),-1!=i&&(r=i));for(var i=[],o=0,a=0;r>a;a++)if(a%4){var c=n.indexOf(t.charAt(a-1))<<2*(a%4),s=n.indexOf(t.charAt(a))>>>6-2*(a%4);i[o>>>2]|=(c|s)<<24-8*(o%4),o++}return e.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),CryptoJS.lib.Cipher||function(t){var e=CryptoJS,r=e.lib,n=r.Base,i=r.WordArray,o=r.BufferedBlockAlgorithm,a=e.enc.Base64,c=e.algo.EvpKDF,s=r.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,r,n){return("string"==typeof r?d:p).encrypt(t,e,r,n)},decrypt:function(e,r,n){return("string"==typeof r?d:p).decrypt(t,e,r,n)}}}});r.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=e.mode={},l=function(e,r,n){var i=this._iv;i?this._iv=t:i=this._prevBlock;for(var o=0;n>o;o++)e[r+o]^=i[o]},f=(r.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();f.Encryptor=f.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize;l.call(this,t,e,n),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),f.Decryptor=f.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=t.slice(e,e+n);r.decryptBlock(t,e),l.call(this,t,e,n),this._prevBlock=i}}),u=u.CBC=f,f=(e.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,r=r-t.sigBytes%r,n=r<<24|r<<16|r<<8|r,o=[],a=0;r>a;a+=4)o.push(n);r=i.create(o,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.BlockCipher=s.extend({cfg:s.cfg.extend({mode:u,padding:f}),reset:function(){s.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=r.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),u=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(a)},parse:function(t){t=a.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var r=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:r})}},p=r.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n);return e=i.finalize(e),i=i.cfg,h.create({ciphertext:e,key:r,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,r,n){return n||(n=i.random(8)),t=c.create({keySize:e+r}).compute(t,n),r=i.create(t.words.slice(e),4*r),t.sigBytes=4*e,h.create({key:t,iv:r,salt:n})}},d=r.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:e}),encrypt:function(t,e,r,n){return n=this.cfg.extend(n),r=n.kdf.execute(r,t.keySize,t.ivSize),n.iv=r.iv,t=p.encrypt.call(this,t,e,r.key,n),t.mixIn(r),t},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),r=n.kdf.execute(r,t.keySize,t.ivSize,e.salt),n.iv=r.iv,p.decrypt.call(this,t,e,r.key,n)}})}(),function(){for(var t=CryptoJS,e=t.lib.BlockCipher,r=t.algo,n=[],i=[],o=[],a=[],c=[],s=[],u=[],l=[],f=[],h=[],p=[],d=0;256>d;d++)p[d]=128>d?d<<1:d<<1^283;for(var y=0,v=0,d=0;256>d;d++){var _=v^v<<1^v<<2^v<<3^v<<4,_=_>>>8^255&_^99;n[y]=_,i[_]=y;var g=p[y],m=p[g],S=p[m],w=257*p[_]^16843008*_;o[y]=w<<24|w>>>8,a[y]=w<<16|w>>>16,c[y]=w<<8|w>>>24,s[y]=w,w=16843009*S^65537*m^257*g^16843008*y,u[_]=w<<24|w>>>8,l[_]=w<<16|w>>>16,f[_]=w<<8|w>>>24,h[_]=w,y?(y=g^p[p[p[S^g]]],v^=p[p[v]]):y=v=1}var E=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes/4,t=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],o=0;t>o;o++)if(r>o)i[o]=e[o];else{var a=i[o-1];o%r?r>6&&4==o%r&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=a<<8|a>>>24,a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=E[o/r|0]<<24),i[o]=i[o-r]^a}for(e=this._invKeySchedule=[],r=0;t>r;r++)o=t-r,a=r%4?i[o]:i[o-4],e[r]=4>r||4>=o?a:u[n[a>>>24]]^l[n[a>>>16&255]]^f[n[a>>>8&255]]^h[n[255&a]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,a,c,s,n)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,u,l,f,h,i),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,a,c){for(var s=this._nRounds,u=t[e]^r[0],l=t[e+1]^r[1],f=t[e+2]^r[2],h=t[e+3]^r[3],p=4,d=1;s>d;d++)var y=n[u>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&h]^r[p++],v=n[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^a[255&u]^r[p++],_=n[f>>>24]^i[h>>>16&255]^o[u>>>8&255]^a[255&l]^r[p++],h=n[h>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&f]^r[p++],u=y,l=v,f=_;y=(c[u>>>24]<<24|c[l>>>16&255]<<16|c[f>>>8&255]<<8|c[255&h])^r[p++],v=(c[l>>>24]<<24|c[f>>>16&255]<<16|c[h>>>8&255]<<8|c[255&u])^r[p++],_=(c[f>>>24]<<24|c[h>>>16&255]<<16|c[u>>>8&255]<<8|c[255&l])^r[p++],h=(c[h>>>24]<<24|c[u>>>16&255]<<16|c[l>>>8&255]<<8|c[255&f])^r[p++],t[e]=y,t[e+1]=v,t[e+2]=_,t[e+3]=h},keySize:8});t.AES=e._createHelper(r)}(),"object"==typeof module&&(module.exports=CryptoJS),function(){"use strict";var t=function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1},e={CHARS:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),decode:function(r){var n,i,o,a,c,s=[],u=e.CHARS,l=r.length;for(o=0;l>o;o+=4){for(a=0,c=0,n=0;4>n;n++)i=r[o+n],"="===i?c+=1:a|=t(u,i)<<6*(3-n);for(n=0;3-c>n;n++)s.push((a>>>8*(2-n))%256)}return String.fromCharCode.apply(String,s)},encode:function(t){var r,n,i,o,a,c="",s=e.CHARS,u=t.length;for(i=0;u>i;i+=3){for(o=0,a=0,r=0;3>r;r++)n=t.charCodeAt(i+r),isNaN(n)?a+=1:o|=n<<8*(2-r);for(r=0;4-a>r;r++)c+=s[(o>>>6*(3-r))%64];for(;a--;)c+="="}return c}},r={decode:function(t){return t},encode:function(t){return t}},n={decode:function(t){for(var e=[],r=0,n=t.length;n>r;r+=2)e[r/2]=parseInt(t.substr(r,2),16);return String.fromCharCode.apply(String,e)},encode:function(t){for(var e,r="",n=0,i=t.length;i>n;n++){if(e=t.charCodeAt(n).toString(16),1===e.length&&(e="0"+e),e.length>2)throw Error("Hex encoding error: Found value "+e+" at offset "+n);r+=e}return r}},i={decode:function(t){for(var e,r,n=[],i=(t.length,0);i<t.length;i++){if(e=t.charCodeAt(i),e>=55296&&56319>=e){if(r=t.charCodeAt(i+1),isNaN(r)||56320>r||r>57343)throw Error("Illegal low surrogate "+r+" at offset "+i);e=65536+(e-55296<<10)+(r-56320),i+=1}if(127>=e)n.push(e);else if(2047>=e)n.push(192|e>>>6,128|e%64);else if(65535>=e)n.push(224|e>>>12,128|(e>>>6)%64,128|e%64);else{if(!(1114111>=e))throw Error("UTF-8 encoding error: Illegal code point "+e+" at offset "+i);n.push(240|e>>>18,128|(e>>>12)%64,128|(e>>>6)%64,128|e%64)}}return String.fromCharCode.apply(String,n)},encode:function(t){for(var e,r,n=[],i=0,o=t.length;o>i;){if(e=[t.charCodeAt(i),t.charCodeAt(i+1),t.charCodeAt(i+2),t.charCodeAt(i+3)],e=[e[0],128&e[1]?e[1]:0/0,128&e[2]?e[2]:0/0,128&e[3]?e[3]:0/0],r=e[0],127>=r)i+=1;else if(223>=r)r=(e[0]%32<<6)+e[1]%64,i+=2;else if(239>=r)r=(e[0]%16<<12)+(e[1]%64<<6)+e[2]%64,i+=3;else{if(!(244>=r))throw Error("UTF-8 encoding error: Illegal leading byte "+r+" at offset "+i);r=(e[0]%8<<18)+(e[1]%64<<12)+(e[2]%64<<6)+e[3]%64,i+=4}if(isNaN(r))throw Error("UTF-8 encoding error: Insufficient bytes at offset "+i);if(r>1114111||r>=55296&&57343>=r)throw Error("UTF-8 encoding error: Illegal code point "+r+" at offset "+i);65535>=r?n.push(r):(r-=65536,n.push(55296+(r>>>10),56320+r%1024))}return String.fromCharCode.apply(String,n)}},o=function(t,e){return this instanceof o?(t instanceof o?t=t._data:t instanceof Array?t=String.fromCharCode.apply(String,t):"number"==typeof t?t=String.fromCharCode.apply(String,Array(t)):"string"==typeof t&&(e=e||"utf8",t=o.ENCODERS[e].decode(t)),this._data=t,this.length=t.length,void 0):new o(t,e)};o.ENCODERS={base64:e,binary:r,hex:n,utf8:i},o.concat=function(t,e,r){var n,i;if("number"!=typeof e)for(e=0,n=0,i=t.length;i>n;n++)e+=t[n].length;r=r||o;var a=new r(e),c=0;for(n=0,i=t.length;i>n;n++)t[n].copy(a,c),c+=t[n].length;return a},o.prototype.copy=function(t,e,r,n){e=e||0,r=r||0,n=n||this._data.length,t._data=t._data.substring(0,e)+this._data.substring(r,n)+t._data.substring(e+n-r,t._data.length),t.length=t._data.length},o.prototype.inspect=function(){return"<Buffer "+this.toString("hex").match(/../g).join(" ")+">"},o.prototype.slice=function(t,e){return new o(this._data.substring(t,e),"binary")},o.prototype.toString=function(t){return t=t||"utf8",o.ENCODERS[t].encode(this._data)},"undefined"!=typeof module?module.exports=o:"undefined"!=typeof window&&(window.Buffer=o)}();var crypto_shim={createCipheriv:function(t,e,r){return new crypto_shim.Cipher(t,new Buffer(e,"binary"),new Buffer(r,"binary"))},createDecipheriv:function(t,e,r){return new crypto_shim.Decipher(t,new Buffer(e,"binary"),new Buffer(r,"binary"))},createHmac:function(t,e){return new crypto_shim.Hmac(t,new Buffer(e,"binary"))},pbkdf2:function(t,e,r,n,i){var o=CryptoJS.PBKDF2(t,e,{keySize:n/4,iterations:r}),a=new Buffer(o.toString(CryptoJS.enc.Hex),"hex");i(null,a)}};crypto_shim.randomBytes="undefined"!=typeof Uint8Array&&"undefined"!=typeof crypto&&crypto.getRandomValues?function(t){var e=new Uint8Array(t);return crypto.getRandomValues(e),new Buffer(String.fromCharCode.apply(String,e),"binary")}:function(t){for(var e=[];t--;)e.push(Math.floor(256*Math.random()));return new Buffer(e)},crypto_shim.Cipher=function(t,e,r){this._mode=t,this._key=CryptoJS.enc.Hex.parse(e.toString("hex")),this._iv=CryptoJS.enc.Hex.parse(r.toString("hex")),this._text=new Buffer([])},crypto_shim.Cipher.prototype.update=function(t,e){return t=new Buffer(t,e),this._text=Buffer.concat([this._text,t]),""},crypto_shim.Cipher.prototype.final=function(t){var e=CryptoJS.enc.Hex.parse(this._text.toString("hex")),r=CryptoJS.AES.encrypt(e,this._key,{iv:this._iv});return r=""+r,new Buffer(r,"base64").toString(t)},crypto_shim.Decipher=function(t,e,r){this._mode=t,this._key=CryptoJS.enc.Hex.parse(e.toString("hex")),this._iv=CryptoJS.enc.Hex.parse(r.toString("hex")),this._text=new Buffer([])},crypto_shim.Decipher.prototype.update=function(t,e){return t=new Buffer(t,e),this._text=Buffer.concat([this._text,t]),""},crypto_shim.Decipher.prototype.final=function(t){var e=this._text.toString("base64"),r=CryptoJS.AES.decrypt(e,this._key,{iv:this._iv});return r=r.toString(CryptoJS.enc.Hex),new Buffer(r,"hex").toString(t)},crypto_shim.Hmac=function(t,e){this._mode=t,this._key=CryptoJS.enc.Hex.parse(e.toString("hex")),this._text=new Buffer([])},crypto_shim.Hmac.prototype.update=function(t,e){return t=new Buffer(t,e),this._text=Buffer.concat([this._text,t]),this},crypto_shim.Hmac.prototype.digest=function(t){var e=CryptoJS.enc.Hex.parse(this._text.toString("hex")),r=CryptoJS.HmacSHA256(e,this._key);return r=r.toString(CryptoJS.enc.Hex),new Buffer(r,"hex").toString(t)},function(t){"object"==typeof module&&"function"==typeof require?module.exports=t(require("crypto"),Buffer,require("./buffer")):"undefined"!=typeof window&&(window.Cipher=t(crypto_shim,null,Buffer))}(function(t,e,r){"use strict";var n=function(e,r,n,i,o,a){t.pbkdf2(e,r,i,n,function(t,e){"string"==typeof e&&(e=new Buffer(e,"binary")),o.call(a,t,e)})},i=function(t,e){e=e||{},t instanceof Array?this._keyPair=t:this._key=t,this._format=void 0===e.format?i.DEFAULT_FORMAT:e.format,this._input=void 0===e.input?i.DEFAULT_INPUT:e.input,this._salt=void 0===e.salt?i.UUID:e.salt,this._work=void 0===e.work?i.DEFAULT_WORK:e.work,this._mode=i.DEFAULT_MODE,this._mac=i.DEFAULT_MAC,this._keySize=i.KEY_SIZE,this._ivSize=i.BLOCK_SIZE,this._macSize=i.MAC_SIZE};i.DEFAULT_WORK=1e3,i.DEFAULT_MODE="aes-256-cbc",i.DEFAULT_MAC="sha256",i.DEFAULT_FORMAT="base64",i.DEFAULT_INPUT="utf8",i.UUID="73e69e8a-cb05-4b50-9f42-59d76a511299",i.KEY_SIZE=32,i.BLOCK_SIZE=16,i.MAC_SIZE=32,i.concatBuffer=function(t){return t[0]instanceof r?r.concat(t):e&&e.concat?e.concat(t):r.concat(t,null,e)},i.randomKeys=function(){var e=t.randomBytes(2*i.KEY_SIZE),r=e.slice(0,i.KEY_SIZE),n=e.slice(i.KEY_SIZE,e.length);return[r,n]},i.prototype.deriveKeys=function(t,e){if(this._keyPair)return t.apply(e,this._keyPair);var r=this;n(this._key,this._salt,2*this._keySize,this._work,function(n,i){var o=i.slice(0,r._keySize),a=i.slice(r._keySize,i.length);r._keyPair=[o,a],t.call(e,o,a)},this)},i.prototype.encrypt=function(e,r,n){this.deriveKeys(function(i,o){var a=t.randomBytes(this._ivSize),c=t.createCipheriv(this._mode,i.toString("binary"),a.toString("binary")),s=c.update(e,this._input,"binary")+c.final("binary");s=new Buffer(s,"binary");var u=new Buffer(a.length+s.length);a.copy(u),s.copy(u,a.length);var l=t.createHmac(this._mac,o.toString("binary"));l.update(u),l=new Buffer(l.digest("binary"),"binary");var f=new Buffer(u.length+l.length);u.copy(f),l.copy(f,u.length),this._format&&(f=f.toString(this._format)),r.call(n,null,f)},this)},i.prototype.decrypt=function(e,r,n){this.deriveKeys(function(i,o){try{var a=new Buffer(e,this._format),c=a.slice(0,Math.max(a.length-this._macSize,0)),s=c.slice(0,Math.min(this._ivSize,c.length)),u=c.slice(Math.min(this._ivSize,c.length)),l=a.slice(Math.max(a.length-this._macSize,0)),f=t.createDecipheriv(this._mode,i.toString("binary"),s.toString("binary")),h=f.update(u,"binary",this._input)+f.final(this._input)}catch(p){return r.call(n,p)}var d=t.createHmac(this._mac,o.toString("binary"));d.update(c),d=new Buffer(d.digest("binary"),"binary");var y=t.createHmac(this._mac,this._salt).update(d).digest("hex"),v=t.createHmac(this._mac,this._salt).update(l).digest("hex");y!==v?r.call(n,Error("DecryptError")):null===h?r.call(n,Error("DecryptError")):r.call(n,null,h)},this)};var o=new i(i.randomKeys(),{format:"binary",input:"binary"});return o.encrypt(new Buffer(2*i.KEY_SIZE),function(t,e){i.ENCRYPTED_KEYPAIR_SIZE=e.length}),i}),function(){function t(t){var r=!1;return function(){if(r)throw Error("Callback was already called.");r=!0,t.apply(e,arguments)}}var e,r,n={};e=this,null!=e&&(r=e.async),n.noConflict=function(){return e.async=r,n};var i=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},o=function(t,e){if(t.map)return t.map(e);var r=[];return i(t,function(t,n,i){r.push(e(t,n,i))}),r},a=function(t,e,r){return t.reduce?t.reduce(e,r):(i(t,function(t,n,i){r=e(r,t,n,i)}),r)},c=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof process&&process.nextTick?(n.nextTick=process.nextTick,n.setImmediate="undefined"!=typeof setImmediate?setImmediate:n.nextTick):"function"==typeof setImmediate?(n.nextTick=function(t){setImmediate(t)},n.setImmediate=n.nextTick):(n.nextTick=function(t){setTimeout(t,0)},n.setImmediate=n.nextTick),n.each=function(e,r,n){if(n=n||function(){},!e.length)return n();var o=0;i(e,function(i){r(i,t(function(t){t?(n(t),n=function(){}):(o+=1,o>=e.length&&n(null))}))})},n.forEach=n.each,n.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var n=0,i=function(){e(t[n],function(e){e?(r(e),r=function(){}):(n+=1,n>=t.length?r(null):i())})};i()},n.forEachSeries=n.eachSeries,n.eachLimit=function(t,e,r,n){var i=s(e);i.apply(null,[t,r,n])},n.forEachLimit=n.eachLimit;var s=function(t){return function(e,r,n){if(n=n||function(){},!e.length||0>=t)return n();var i=0,o=0,a=0;!function c(){if(i>=e.length)return n();for(;t>a&&o<e.length;)o+=1,a+=1,r(e[o-1],function(t){t?(n(t),n=function(){}):(i+=1,a-=1,i>=e.length?n():c())})}()}},u=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[n.each].concat(e))}},l=function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[s(t)].concat(r))}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[n.eachSeries].concat(e))}},h=function(t,e,r,n){var i=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r,n){i[t.index]=n,e(r)})},function(t){n(t,i)})};n.map=u(h),n.mapSeries=f(h),n.mapLimit=function(t,e,r,n){return p(e)(t,r,n)};var p=function(t){return l(t,h)};n.reduce=function(t,e,r,i){n.eachSeries(t,function(t,n){r(e,t,function(t,r){e=r,n(t)})},function(t){i(t,e)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(t,e,r,i){var a=o(t,function(t){return t}).reverse();n.reduce(a,e,r,i)},n.foldr=n.reduceRight;var d=function(t,e,r,n){var i=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&i.push(t),e()})},function(){n(o(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};n.filter=u(d),n.filterSeries=f(d),n.select=n.filter,n.selectSeries=n.filterSeries;var y=function(t,e,r,n){var i=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||i.push(t),e()})},function(){n(o(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};n.reject=u(y),n.rejectSeries=f(y);var v=function(t,e,r,n){t(e,function(t,e){r(t,function(r){r?(n(t),n=function(){}):e()})},function(){n()})};n.detect=u(v),n.detectSeries=f(v),n.some=function(t,e,r){n.each(t,function(t,n){e(t,function(t){t&&(r(!0),r=function(){}),n()})},function(){r(!1)})},n.any=n.some,n.every=function(t,e,r){n.each(t,function(t,n){e(t,function(t){t||(r(!1),r=function(){}),n()})},function(){r(!0)})},n.all=n.every,n.sortBy=function(t,e,r){n.map(t,function(t,r){e(t,function(e,n){e?r(e):r(null,{value:t,criteria:n})})},function(t,e){if(t)return r(t);var n=function(t,e){var r=t.criteria,n=e.criteria;return n>r?-1:r>n?1:0};r(null,o(e.sort(n),function(t){return t.value}))})},n.auto=function(t,e){e=e||function(){};var r=c(t);if(!r.length)return e(null);var o={},s=[],u=function(t){s.unshift(t)},l=function(t){for(var e=0;e<s.length;e+=1)if(s[e]===t)return s.splice(e,1),void 0},f=function(){i(s.slice(0),function(t){t()})};u(function(){c(o).length===r.length&&(e(null,o),e=function(){})}),i(r,function(r){var s=t[r]instanceof Function?[t[r]]:t[r],h=function(t){var a=Array.prototype.slice.call(arguments,1);if(a.length<=1&&(a=a[0]),t){var s={};i(c(o),function(t){s[t]=o[t]}),s[r]=a,e(t,s),e=function(){}}else o[r]=a,n.setImmediate(f)},p=s.slice(0,Math.abs(s.length-1))||[],d=function(){return a(p,function(t,e){return t&&o.hasOwnProperty(e)},!0)&&!o.hasOwnProperty(r)};if(d())s[s.length-1](h,o);else{var y=function(){d()&&(l(y),s[s.length-1](h,o))};u(y)}})},n.waterfall=function(t,e){if(e=e||function(){},t.constructor!==Array){var r=Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var i=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var o=Array.prototype.slice.call(arguments,1),a=t.next();a?o.push(i(a)):o.push(e),n.setImmediate(function(){t.apply(null,o)})}}};i(n.iterator(t))()};var _=function(t,e,r){if(r=r||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var n={};t.each(c(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(t){r(t,n)})}};n.parallel=function(t,e){_({map:n.map,each:n.each},t,e)},n.parallelLimit=function(t,e,r){_({map:p(e),each:s(e)},t,r)},n.series=function(t,e){if(e=e||function(){},t.constructor===Array)n.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};n.eachSeries(c(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(t){e(t,r)})}},n.iterator=function(t){var e=function(r){var n=function(){return t.length&&t[r].apply(null,arguments),n.next()};return n.next=function(){return r<t.length-1?e(r+1):null},n};return e(0)},n.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var g=function(t,e,r,n){var i=[];t(e,function(t,e){r(t,function(t,r){i=i.concat(r||[]),e(t)})},function(t){n(t,i)})};n.concat=u(g),n.concatSeries=f(g),n.whilst=function(t,e,r){t()?e(function(i){return i?r(i):(n.whilst(t,e,r),void 0)}):r()},n.doWhilst=function(t,e,r){t(function(i){return i?r(i):(e()?n.doWhilst(t,e,r):r(),void 0)})},n.until=function(t,e,r){t()?r():e(function(i){return i?r(i):(n.until(t,e,r),void 0)})},n.doUntil=function(t,e,r){t(function(i){return i?r(i):(e()?r():n.doUntil(t,e,r),void 0)})},n.queue=function(e,r){function o(t,e,o,a){e.constructor!==Array&&(e=[e]),i(e,function(e){var i={data:e,callback:"function"==typeof a?a:null};o?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===r&&t.saturated(),n.setImmediate(t.process)})}void 0===r&&(r=1);var a=0,c={tasks:[],concurrency:r,saturated:null,empty:null,drain:null,push:function(t,e){o(c,t,!1,e)},unshift:function(t,e){o(c,t,!0,e)},process:function(){if(a<c.concurrency&&c.tasks.length){var r=c.tasks.shift();c.empty&&0===c.tasks.length&&c.empty(),a+=1;var n=function(){a-=1,r.callback&&r.callback.apply(r,arguments),c.drain&&c.tasks.length+a===0&&c.drain(),c.process()},i=t(n);e(r.data,i)}},length:function(){return c.tasks.length},running:function(){return a}};return c},n.cargo=function(t,e){var r=!1,a=[],c={tasks:a,payload:e,saturated:null,empty:null,drain:null,push:function(t,r){t.constructor!==Array&&(t=[t]),i(t,function(t){a.push({data:t,callback:"function"==typeof r?r:null}),c.saturated&&a.length===e&&c.saturated()}),n.setImmediate(c.process)},process:function s(){if(!r){if(0===a.length)return c.drain&&c.drain(),void 0;var n="number"==typeof e?a.splice(0,e):a.splice(0),u=o(n,function(t){return t.data});c.empty&&c.empty(),r=!0,t(u,function(){r=!1;var t=arguments;i(n,function(e){e.callback&&e.callback.apply(null,t)}),s()})}},length:function(){return a.length},running:function(){return r}};return c};var m=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&i(r,function(e){console[t](e)}))}]))}};n.log=m("log"),n.dir=m("dir"),n.memoize=function(t,e){var r={},n={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=e.apply(null,i);a in r?o.apply(null,r[a]):a in n?n[a].push(o):(n[a]=[o],t.apply(null,i.concat([function(){r[a]=arguments;var t=n[a];delete n[a];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=t,i},n.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},n.times=function(t,e,r){for(var i=[],o=0;t>o;o++)i.push(o);return n.map(i,e,r)},n.timesSeries=function(t,e,r){for(var i=[],o=0;t>o;o++)i.push(o);return n.mapSeries(i,e,r)},n.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();n.reduce(t,r,function(t,r,n){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))},function(t,r){i.apply(e,[t].concat(r))})}};var S=function(t,e){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return t(e,function(t,e){t.apply(r,n.concat([e]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};n.applyEach=u(S),n.applyEachSeries=f(S),n.forever=function(t,e){function r(n){if(n){if(e)return e(n);throw n}t(r)}r()},"undefined"!=typeof define&&define.amd?define([],function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:e.async=n}();var Vault=function(t){this._phrase=t.phrase||"",this._length=t.length||Vault.DEFAULT_LENGTH,this._repeat=t.repeat||Vault.DEFAULT_REPEAT,this._allowed=Vault.ALL.slice(),this._required=[];
for(var e,r=Vault.TYPES,n=0,i=r.length;i>n;n++)e=t[r[n].toLowerCase()],0===e?this.subtract(Vault[r[n]]):"number"==typeof e&&this.require(Vault[r[n]],e);for(var i=this._length-this._required.length;i>=0&&i--;)this._required.push(this._allowed)};Vault.UUID="e87eb0f4-34cb-46b9-93ad-766c5ab063e7",Vault.DEFAULT_LENGTH=20,Vault.DEFAULT_REPEAT=0,Vault.LOWER="abcdefghijklmnopqrstuvwxyz".split(""),Vault.UPPER="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),Vault.ALPHA=Vault.LOWER.concat(Vault.UPPER),Vault.NUMBER="0123456789".split(""),Vault.ALPHANUM=Vault.ALPHA.concat(Vault.NUMBER),Vault.SPACE=[" "],Vault.DASH=["-","_"],Vault.SYMBOL="!\"#$%&'()*+,./:;<=>?@[\\]^{|}~".split("").concat(Vault.DASH),Vault.ALL=Vault.ALPHANUM.concat(Vault.SPACE).concat(Vault.SYMBOL),Vault.TYPES="LOWER UPPER NUMBER SPACE DASH SYMBOL".split(" "),Vault.extend=function(t,e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r]);return t},Vault.createHash=function(t,e,r){var n=void 0!==CryptoJS?CryptoJS:require("vault-cipher/lib/crypto-js"),i=(r||256)/8;return""+n.PBKDF2(t,e,{keySize:Math.ceil(i/4),iterations:8})},Vault.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1},Vault.map=function(t,e,r){if(t.map)return t.map(e,r);for(var n=[],i=0,o=t.length;o>i;i++)n.push(e.call(r,t[i]));return n},Vault.toBits=function(t){for(var e=parseInt(t,16).toString(2);e.length<4;)e="0"+e;return e},Vault.prototype.subtract=function(t,e){if(t){e=e||this._allowed;for(var r=0,n=t.length;n>r;r++){var i=Vault.indexOf(e,t[r]);i>=0&&e.splice(i,1)}return e}},Vault.prototype.require=function(t,e){if(t)for(;e--;)this._required.push(t)},Vault.prototype.entropy=function(){for(var t=0,e=0,r=this._required.length;r>e;e++)t+=Math.ceil(Math.log(e+1)/Math.log(2)),t+=Math.ceil(Math.log(this._required[e].length)/Math.log(2));return t},Vault.prototype.generate=function(t){if(this._required.length>this._length)throw Error("Length too small to fit all required characters");if(0===this._allowed.length)throw Error("No characters available to create a password");for(var e,r,n,i,o,a=this._required.slice(),c=new Vault.Stream(this._phrase,t,this.entropy()),s="";s.length<this._length;){for(e=c.generate(a.length),r=a.splice(e,1)[0],n=s.charAt(s.length-1),i=this._repeat-1,o=n&&i>=0;o&&i--;)o=o&&s.charAt(s.length+i-this._repeat)===n;o&&(r=this.subtract([n],r.slice())),e=c.generate(r.length),s+=r[e]}return s},Vault.Stream=function(t,e,r){this._phrase=t,this._service=e;var n=Vault.createHash(t,e+Vault.UUID,2*r),i=Vault.map(n.split(""),Vault.toBits).join("").split("");this._bases={2:Vault.map(i,function(t){return parseInt(t,2)})}},Vault.Stream.prototype.generate=function(t,e,r){e=e||2;var n,i=t,o=Math.ceil(Math.log(t)/Math.log(e)),a=Math.pow(e,o)-t;t:for(;i>=t;){if(n=this._shift(e,o),!n)return r?t:null;if(i=this._evaluate(n,e),i>=t){if(1===a)continue t;this._push(a,i-t),i=this.generate(t,a,!0)}}return i},Vault.Stream.prototype._evaluate=function(t,e){for(var r=0,n=t.length;n--;)r+=t[n]*Math.pow(e,t.length-(n+1));return r},Vault.Stream.prototype._push=function(t,e){this._bases[t]=this._bases[t]||[],this._bases[t].push(e)},Vault.Stream.prototype._shift=function(t,e){var r=this._bases[t];return!r||r.length<e?null:r.splice(0,e)},"object"==typeof module&&(module.exports=Vault);var keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e},map=function(t,e,r){for(var n=[],i=0,o=t.length;o>i;i++)n[i]=e.call(r,t[i],i,t);return n},queryparse=function(t){if("object"==typeof t)return t;if(/^ *$/.test(t))return{};for(var e,r={},n=t.split("&"),i=0,o=n.length;o>i;i++)e=n[i].split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e.slice(1).join("="));return r},querystring=function(t){if("string"==typeof t)return t;var e=[];for(var r in t)e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")},request=function(t,e,r,n,i,o,a){r=querystring(r),"GET"===t?""!==r&&(e=e+(/\?/.test(e)?"&":"?")+r):"PUT"===t?n["Content-Length"]=r.length:"DELETE"===t&&(n["Content-Length"]="0");var c=window.XDomainRequest?new XDomainRequest:new XMLHttpRequest;c.open(t,e,!0);for(var s in n)c.setRequestHeader&&c.setRequestHeader(s,n[s]);c.onload=c.onerror=c.ontimeout=function(){if(0===c.status)return o.call(a,Error("Request failied: "+e));var t={},r=c.getAllResponseHeaders();map(r.match(/^[^:]+:/gm)||[],function(e){e=e.replace(/^\s*/,"").replace(/:\s*$/,""),t[e.toLowerCase()]=c.getResponseHeader(e)}),o.call(a,null,{statusCode:c.status,headers:t,body:c.responseText})},"PUT"===t?c.send(r):c.send("")},oauth={authorize:function(t,e,r,n){var i=/\?/.test(t)?"&":"?";t=t+i+querystring({client_id:e,redirect_uri:window.location.href.replace(/#.*$/,""),scope:r.join(" "),response_type:"token",state:n.state}),window.location.href=t}};!function(t){var e=Array.prototype.map?function(t,e,r){return t.map(e,r)}:window.map,r="function"==typeof require,n=r?require("remotestorage-oauth"):window.oauth,i=r?require("../node/request"):window.request,o=t(e,i,n);r?module.exports=o:window.RemoteStorage=o}(function(t,e,r){var n=function(t){Error.apply(this,arguments),this.message=t},i=function(){};i.prototype=Error.prototye,n.prototype=new i;var o=function(t,e){this._clientId=t,this._scopes=e};o.prototype.connect=function(t,e){return new a(this,t,e)},o.prototype.getScopes=function(t){var e,r=[];for(var n in this._scopes)e=n,"2011.10"!==t&&(e+=":"+this._scopes[n].join("")),r.push(e);return r};var a=function(t,e,r){var n=e.split("@");this._client=t,this._address=e,this._user=n[0],this._host=n[1],this._options=r||{},this._requestOpts={},this._options.ca&&(this._requestOpts.ca=new Buffer(this._options.ca,"utf8")),this._storageUrl=this._options.storage,this._oauthUrl=this._options.oauth,this._version=this._options.version,this._token=this._options.token};return a.prototype._storageDetails=function(){return{storage:this._storageUrl,oauth:this._oauthUrl,version:this._version,token:this._token}},a.prototype.authorize=function(t,e){this.discover(function(n,i){if(n)return t.call(e,n);if(this._token)return t.call(e,null,this._storageDetails());var o=i.oauth,a=this._client._clientId,c=this._client.getScopes(this._version),s=this;r.authorize(o,a,c,this._options,function(r,n){return r?t.call(e,r):(s._token=n.access_token,t.call(e,null,s._storageDetails()),void 0)})},this)},a.prototype.discover=function(r,n){if(this._storageUrl)return r.call(n,null,this._storageDetails());var i="acct:"+this._user+"@"+this._host,o=t(["https","http"],function(t){return t+"://"+this._host+"/.well-known/host-meta.json"},this),a=function(t){var s=o[t];return s?(e("GET",s,{resource:i},{},this._requestOpts,function(r,n){if(r)return a.call(this,t+1);var o,s,u,l,f;try{o=JSON.parse(n.body.toString("utf8")),s=o.links[0],u=s.template,f=(s.properties||{})["auth-endpoint"],l=s.href}catch(h){return a.call(this,t+1)}u?e("GET",u.replace("{uri}",encodeURIComponent(i)),{},{},this._requestOpts,function(e,r){if(e)return a.call(this,t+1);try{o=JSON.parse(r.body.toString("utf8")),s=o.links[0],f=s.auth,l=s.template}catch(n){return a.call(this,t+1)}c.call(this,l,f,"2011.10")},this):c.call(this,l,f,"2012.04")},this),void 0):r.call(n,Error("Could not find RemoteStorage endpoints for "+this._address))},c=function(t,e,i){this._storageUrl=t,this._oauthUrl=e,this._version=i,r.call(n,null,this._storageDetails())};a.call(this,0)},a.prototype.get=function(t,r,n){this.authorize(function(i,o){if(i)return r.call(n,i);var a=this._urlFor(t),c={Authorization:"Bearer "+o.token};e("GET",a,{},c,this._requestOpts,function(t,e){this._parseResponse(t,"GET",e,r,n)},this)},this)},a.prototype.put=function(t,r,n,i,o){this.authorize(function(a,c){if(a)return i.call(o,a);var s=this._urlFor(t),u={Authorization:"Bearer "+c.token,"Content-Type":r};e("PUT",s,n,u,this._requestOpts,function(t,e){this._parseResponse(t,"PUT",e,i,o)},this)},this)},a.prototype.delete=function(t,r,n){this.authorize(function(i,o){if(i)return r.call(n,i);var a=this._urlFor(t),c={Authorization:"Bearer "+o.token};e("DELETE",a,{},c,this._requestOpts,function(t,e){this._parseResponse(t,"DELETE",e,r,n)},this)},this)},a.prototype._urlFor=function(t){var e=this._storageUrl;return"2011.10"===this._version&&(e=e.replace(/\/+\{category\}\/*/,"")),e+t.replace(/^\/*/,"/")},a.prototype._parseResponse=function(t,e,r,i,o){var a=r&&r.statusCode;if((401===a||403===a)&&(t=new n('Access denied for "'+this._address+'"')),"PUT"===e&&a>=400&&(t=new n('Request to "'+this._address+'" failed')),t)return i.call(o,t);if(200>a||a>=300)return i.call(o,null,null);var c=r.body,s=r.headers["content-type"],u=r.headers.etag;i.call(o,null,{data:c,type:s,version:u})},o.RequestError=n,o}),function(t){var e="function"==typeof require,r=e?require("async"):window.async,n=e?require("./remotestorage"):window.RemoteStorage,i=t(r,n);e?module.exports=i:Vault.RSAdapter=i}(function(t,e){var r=function(t,n){this._address=t,this._client=new e("Vault",{vault:["r","w"]}),this._conn=this._client.connect(this._address,n),this._path=r.ROOT_PATH};return r.CONTENT_TYPE="application/vnd.vault.keychain",r.ROOT_PATH="/vault",r.prototype.getName=function(){return this._address},r.prototype.getType=function(){return"remotestorage"},r.prototype.authorize=function(t,e){return this._conn.authorize(t,e)},r.prototype.load=function(t,e,r){this._conn.get(this._path+"/"+t,function(t,n){return t?e.call(r,t):n?(e.call(r,null,n.data.toString("utf8")),void 0):e.call(r,null,null)},this)},r.prototype.dump=function(t,e,n,i){this._conn.put(this._path+"/"+t,r.CONTENT_TYPE,e,n,i)},r.prototype.remove=function(e,r,n){var i=this._path+"/"+e,o=this;return/\/$/.test(e)?(this._conn.get(i,function(i,a){if(i)return r.call(n,i);if(!a||!a.data)return r.call(n);var c=JSON.parse(a.data.toString("utf8"));t.forEach(Object.keys(c),function(t,r){o.remove(e+t,r)},function(t){r.call(n,t)})}),void 0):this._conn.delete(i,r,n)},r}),function(t){var e="function"==typeof require,r=e?require("crypto"):window.crypto_shim,n=e?require("vault-cipher"):window.Cipher,i=e?require("./vault"):window.Vault,o=t(r,n,i);e?module.exports=o:i.Loader=o}(function(t,e,r){var n=function(t){if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Array)return t.map(function(t){return n(t)});for(var e={},r=Object.keys(t).sort(),i=0,o=r.length;o>i;i++)e[r[i]]=n(t[r[i]]);return e},i=function(t,n,i){this._adapter=t,this._cipher=new e(n,{format:"binary",input:"binary",salt:r.UUID,work:100}),this._cache=i.cache!==!1?{}:null};return i.BUCKETS="0123456789abcdef".split(""),i.LOCAL="local",i.prototype.getName=function(){return this._adapter.getName()},i.prototype.pathForService=function(e,r,n){return e?(this._cipher.deriveKeys(function(i,o){var a=t.createHmac("sha256",o);a.update(e),r.call(n,null,"services/"+a.digest("hex")[0])},this),void 0):r.call(n,Error("No service name given"))},i.prototype.load=function(t,r,n){return this._cache&&this._cache[t]?r.call(n,null,this._cache[t]):(this._adapter.load(t,function(i,o){if(i)return r.call(n,i);if(!o)return r.call(n,null,{});o=new Buffer(o,"base64");var a=Error("Your .vault database is unreadable; check your VAULT_KEY and VAULT_PATH settings"),c=e.KEY_SIZE,s=e.ENCRYPTED_KEYPAIR_SIZE;if(o.length<s)return r.call(n,a);var u=o.slice(0,s),l=o.slice(s,o.length);this._cipher.decrypt(u,function(i,o){if(i)return r.call(n,a);o=new Buffer(o,"binary");var s=[o.slice(0,c),o.slice(c,2*c)];cipher=new e(s,{format:"binary"}),cipher.decrypt(l,function(e,i){if(e)return r.call(n,a);try{config=JSON.parse(i)}catch(o){return r.call(n,a)}this._cache&&(this._cache[t]=config),r.call(n,null,config)},this)},this)},this),void 0)},i.prototype.dump=function(t,r,i,o){r=n(r),this._cache&&(this._cache[t]=r);var a=JSON.stringify(r,!0,2),c=e.randomKeys(),s=e.concatBuffer(c),u=new e(c,{format:"binary"});u.encrypt(a,function(r,n){this._cipher.encrypt(s,function(r,a){n=new Buffer(n,"binary"),a=new Buffer(a,"binary");var c=e.concatBuffer([a,n]);this._adapter.dump(t,c.toString("base64"),i,o)},this)},this)},i.prototype.remove=function(t,e,r){return this._adapter.remove(t,e,r)},i}),function(t){var e="function"==typeof require,r=e?require("async"):window.async,n=e?require("./vault"):window.Vault,i=e?require("./loader"):n.Loader,o=e?require("./rs_adapter"):n.RSAdapter,a=t(r,n,i,o);e?module.exports=a:n.Store=a}(function(t,e,r,n){var i=function(t,e,n){this._loader=new r(t,e,n),this._remotes={}};return i.prototype.addSource=function(t,r,i,o){var a=new n(t,r);a.authorize(function(n,c){return n?i.call(o,n):(this._loader.load("sources",function(n,s){return n?i.call(o,n):(c.address=t,c.type=a.getType(),e.extend(c,r),s[t]=c,this._loader.dump("sources",s,i,o),void 0)},this),void 0)},this)},i.prototype.deleteSource=function(t,e,r){this._loader.load("sources",function(n,i){return n?e.call(r,n):(this.isSource(t,function(n){return n?e.call(r,n):(delete i[t],this._loader.dump("sources",i,e,r),void 0)},this),void 0)},this)},i.prototype.isSource=function(t,e,n){this._loader.load("sources",function(i,o){if(i)return e.call(n,i);var a=t!==r.LOCAL&&!/^__.+__$/.test(t)&&o[t];e.call(n,a?null:Error('Source "'+t+'" does not exist'))})},i.prototype.listSources=function(t,e){this._loader.load("sources",function(n,i){if(n)return t.call(e,n);var o=Object.keys(i).filter(function(t){return!/^__.+__$/.test(t)}),a=this._source||i.__current__;a&&i[a]||(a=r.LOCAL),t.call(e,null,o.concat(r.LOCAL),a)},this)},i.prototype.setDefaultSource=function(t,e,r){this._loader.load("sources",function(n,i){return n?e.call(r,n):(this.isSource(t,function(n){return n?e.call(r,n):(i.__current__=t,this._loader.dump("sources",i,e,r),void 0)},this),void 0)},this)},i.prototype.setSource=function(t){this._source=t},i.prototype.showSource=function(t,e,r){this._loader.load("sources",function(n,i){return n?e.call(r,n):(this.isSource(t,function(n){return n?e.call(r,n):(e.call(r,null,i[t]),void 0)},this),void 0)},this)},i.prototype.currentStore=function(t,e){this._loader.load("sources",function(r,n){if(r)return t.call(e,r);var i=this._source||n.__current__;this.getStore(i,t,e)},this)},i.prototype.getName=function(){return this._loader.getName()},i.prototype.getStore=function(t,e,n){this._loader.load("sources",function(i,o){if(i)return e.call(n,i);var a=t&&t!==r.LOCAL?this._getRemote(t,o[t]):this;e.call(n,null,a)},this)},i.prototype._getRemote=function(t,e){if(this._remotes[t])return this._remotes[t];var r=new n(t,e),o=new i(r,e.key,{});return this._remotes[t]=o},i.prototype.listServices=function(e,n){var i=this;t.map(r.BUCKETS,function(t,e){i._loader.load("services/"+t,function(t,r){e(t,r&&Object.keys(r))})},function(t,r){return t?e.call(n,t):(r=r.reduce(function(t,e){return t.concat(e)}),e.call(n,t,r.sort()),void 0)})},i.prototype.saveGlobals=function(t,r,n){var i="global";this._loader.load(i,function(o,a){if(o)return r.call(n,o);var c={};e.extend(c,t),e.extend(c,a),this._loader.dump(i,c,r,n)},this)},i.prototype.deleteGlobals=function(t,e){this._loader.remove("global",t,e)},i.prototype.saveService=function(t,r,n,i,o){this._loader.pathForService(t,function(a,c){return a?i.call(a):(this._loader.load(c,function(a,s){if(a)return i.call(o,a);var u=s[t]||{},l={};n?l=r:(e.extend(l,r),e.extend(l,u)),s[t]=l,this._loader.dump(c,s,i,o)},this),void 0)},this)},i.prototype.deleteService=function(t,e,r){this._loader.pathForService(t,function(n,i){return n?e.call(r,n):(this._loader.load(i,function(n,o){return n?e.call(r,n):o.hasOwnProperty(t)?(delete o[t],this._loader.dump(i,o,e,r),void 0):e.call(r,Error('Service "'+t+'" is not configured'))},this),void 0)},this)},i.prototype.serviceSettings=function(r,n,i,o){var a=this;this._loader.pathForService(r,function(c,s){return c?i.call(o,c):(t.parallel({global:function(t){return n?(a._loader.load("global",t),void 0):t(null,{})},service:function(t){a._loader.load(s,t)}},function(t,n){if(t)return i.call(o,t);var a={};e.extend(a,n.service[r]||{}),e.extend(a,n.global),i.call(o,null,a)}),void 0)})},i.prototype.import=function(e,r,n){var i=this;this._loader.dump("global",e.global||{},function(o){if(o)return r.call(n,o);var a=Object.keys(e.services||{});t.forEachSeries(a,function(t,r){i.saveService(t,e.services[t],!0,r)},function(t){r.call(n,t)})},this)},i.prototype.export=function(n,i){var o={services:{}},a=this;this._loader.load("global",function(c,s){return c?n.call(i,c):(o.global=s,t.forEach(r.BUCKETS,function(t,r){a._loader.load("services/"+t,function(t,n){t||e.extend(o.services,n),r(t)})},function(t){n.call(i,t,o)}),void 0)})},i.prototype.clear=function(e,r){var n=this;t.forEach(["global","services/"],function(t,e){n._loader.remove(t,e)},function(t){e.call(r,t)})},i});var $=function(t){return document.getElementById(t)},on=function(t,e,r){t&&(t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,r))},getRadio=function(t){for(var e,r=document.getElementsByTagName("input"),n=0,i=r.length;i>n;n++)if(e=r[n],"radio"===e.type&&e.name===t&&e.checked)return e.value},setRadio=function(t,e){for(var r,n=document.getElementsByTagName("input"),i=0,o=n.length;o>i;i++)if(r=n[i],"radio"===r.type&&r.name===t)switch(r.value){case"required":r.checked=e&&e>0;break;case"allowed":r.checked=void 0===e;break;case"forbidden":r.checked=0===e}},togglePassword=function(t){var e=$(t),r=$(t+"-text"),n=$("show-"+t);r&&(r.style.display="none"),on(n,"click",function(){n.checked?(e.style.display="none",r.style.display=""):(e.style.display="",r.style.display="none")}),on(e,"keyup",function(){r.value=e.value}),on(r,"keyup",function(){e.value=r.value})};togglePassword("passphrase"),function(){var t=$("message"),e=$("service"),r=$("passphrase"),n=$("required"),i=$("vlength"),o=$("repeat"),a=$("word"),c=($("word-text"),"lower upper number dash space symbol".split(" "));e&&e.focus();for(var s=function(){if(!i)return null;for(var t,e=parseInt(i.value,10),a=parseInt(o.value,10),s=parseInt(n.value,10),u={phrase:r.value,length:e,repeat:a},l=0,f=c.length;f>l;l++)t=getRadio(c[l]),"forbidden"===t?u[c[l]]=0:"required"===t&&(u[c[l]]=s);return u},u=s(),l=function(){var t=s();if(t)try{a.value=e.value&&r.value?new Vault(t).generate(e.value):""}catch(n){a.value="!! "+n.message}},f=document.getElementsByTagName("input"),h=0,p=f.length;p>h;h++)"word"!==f[h].id&&"checkbox"!==f[h].type&&(on(f[h],"keyup",l),on(f[h],"change",l));var d=function(){store&&(t.innerHTML="Loading&hellip;",t.className="active",store.serviceSettings(e.value,!0,function(e,a){if(e)return t.innerHTML="Error";r.value=a.phrase||u.phrase,i.value=a.length||u.length,o.value=a.repeat||u.repeat||"";var s,f,h,p=c.length;for(h=0;p>h;h++)s=a[c[h]],f=f||s,setRadio(c[h],s);n.value=void 0===f?2:f,l(),t.innerHTML=store.getName(),t.className=""}))};on(e,"blur",d);var y=function(){var t=a.value.replace(/'/g,"\\'");chrome.tabs.executeScript(null,{code:"(document.activeElement||{}).value = '"+t+"';"}),window.close()},v=$("insert-password");on(v,"click",function(t){t.preventDefault(),y()}),on(e,"keydown",function(t){13===t.keyCode&&y()}),on(r,"keydown",function(t){13===t.keyCode&&y()})}(),function(){var t,e,r=$("connectForm"),n=$("connectResult"),i=$("address"),o=$("key"),a=$("feedback"),c=$("userId"),s=$("bookmark"),u=location.hash.replace(/^#/,""),l=location.search.replace(/^\?/,""),f=u||l,h=queryparse(f),p=h.access_token,d=h.error,y=h.state||"",v=localStorage.keyPair,_=Cipher.KEY_SIZE,g=h.address||y.split(":").slice(1).join(":"),m=h.key;localStorage.clear(),p?m?(window.store=new Vault.Store(new Vault.RSAdapter(g,{token:p}),m,{}),$("message").innerHTML=g):(m=y.split(":")[0],v=new Buffer(v,"base64"),e=[v.slice(0,_),v.slice(_,2*_)],t=new Cipher(e,{format:"hex"}),t.decrypt(m,function(t,e){if(t)return a.innerHTML=t.message;var n={access_token:p,address:g,key:e},i=location.protocol+"//"+location.host+"/#"+querystring(n);r&&(r.style.display="none",c.innerHTML=g,s.href=i)})):(d&&r&&(i.value=g,a.innerHTML="Could not make a connection to "+g),n&&(n.style.display="none"));var S=function(t,e){var r=Cipher.randomKeys(),n=new Cipher(r,{format:"hex"});localStorage.keyPair=Buffer.concat(r).toString("base64"),n.encrypt(e,function(e,r){var n=new Vault.RSAdapter(t,{state:r+":"+t});a.innerHTML="Connecting&hellip;",n.authorize(function(t){a.innerHTML=t.message})})};on(r,"submit",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,S(i.value,o.value)})}();
//@ sourceMappingURL=vault-min.js.map